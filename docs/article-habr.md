# –°–µ—Ä–≤–∏—Å–≤–æ—Ä–∫–µ—Ä: –∫–æ–≥–¥–∞ Workbox —É–∂–µ —Å–ª–∏—à–∫–æ–º —Ç—è–∂—ë–ª—ã–π

–°–µ—Ä–≤–∏—Å‚Äë–≤–æ—Ä–∫–µ—Ä—ã —Å–µ–≥–æ–¥–Ω—è ‚Äî –Ω–µ —ç–∫–∑–æ—Ç–∏–∫–∞, –∞ —Ä–∞–±–æ—á–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: offline‚Äë—Ä–µ–∂–∏–º, –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, ¬´–∂–∏–≤—ã–µ¬ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –≤—Å—ë —Ç–∞–∫–æ–µ. –ü–æ–¥ —ç—Ç–æ —É–∂–µ –¥–∞–≤–Ω–æ –µ—Å—Ç—å –æ—Ç–ª–∏—á–Ω—ã–π, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π Workbox, –∏ —è —Å–∞–º —Å –Ω–∏–º —Ä–∞–±–æ—Ç–∞–ª.

–ù–æ –ø–æ –º–µ—Ä–µ —Ç–æ–≥–æ, –∫–∞–∫ —è —Ç–∞—Å–∫–∞–ª SW –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –ø—Ä–æ–µ–∫—Ç, —É –º–µ–Ω—è –≤—Å—ë —á–∞—â–µ –≤–æ–∑–Ω–∏–∫–∞–ª–æ –æ—â—É—â–µ–Ω–∏–µ, —á—Ç–æ **–º–Ω–µ –Ω—É–∂–µ–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ñ–∏–ª–µ–º**:

- –ø–æ–º–µ–Ω—å—à–µ –º–∞–≥–∏–∏ –∏ —Å–ª–æ—ë–≤ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏;
- –ø–æ–ø—Ä–æ—â–µ –≤—Ö–æ–¥ –≤ –∫–æ–¥ –∏ –≤ ¬´–∫–∞–∫ —Ç—É—Ç –≤—Å—ë —É—Å—Ç—Ä–æ–µ–Ω–æ¬ª;
- –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∏–∑ –º–∞–ª–µ–Ω—å–∫–∏—Ö –ø–ª–∞–≥–∏–Ω–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ª–µ–≥–∫–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –≥–ª–∞–∑–∞–º–∏ –∏ –æ—Ç–ª–∞–¥–∏—Ç—å.

–ü–æ—ç—Ç–æ–º—É —è –Ω–∞–ø–∏—Å–∞–ª [`@budarin/pluggable-serviceworker`](https://www.npmjs.com/package/@budarin/pluggable-serviceworker) ‚Äî **–Ω–µ –≤–º–µ—Å—Ç–æ Workbox**, –∞ –∫–∞–∫ –±–æ–ª–µ–µ –ª—ë–≥–∫–∏–π, —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ä–∞–Ω—Ç–∞–π–º –¥–ª—è —Ç–µ—Ö —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ —Ö–æ—á–µ—Ç—Å—è –ø–æ–ª–Ω–æ–π —É–ø—Ä–∞–≤–ª—è–µ–º–æ—Å—Ç–∏ –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ–π –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏.

### –ü–æ—á–µ–º—É –Ω–µ –ø—Ä–æ—Å—Ç–æ Workbox?

–°—Ä–∞–∑—É –æ—Ç–≤–µ—á—É –Ω–∞ –æ–∂–∏–¥–∞–µ–º—ã–π –≤–æ–ø—Ä–æ—Å: ¬´–ê –ø–æ—á–µ–º—É —Ç—ã –Ω–µ –≤–∑—è–ª Workbox, –æ–Ω –∂–µ —É–∂–µ –≤—Å—ë —É–º–µ–µ—Ç?¬ª

–Ø Workbox —É–≤–∞–∂–∞—é –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª, –Ω–æ –≤–∂–∏–≤—É—é —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –º–æ–º–µ–Ω—Ç–∞–º–∏:

- **–°–ª–æ–∂–Ω–æ—Å—Ç—å API –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**
  Workbox —Ä–µ—à–∞–µ—Ç –æ—á–µ–Ω—å –º–Ω–æ–≥–æ –∑–∞–¥–∞—á –∏ —Ç–∞—â–∏—Ç –∑–∞ —Å–æ–±–æ–π —Å–≤–æ—é –º–æ–¥–µ–ª—å —Ä–æ—É—Ç–∏–Ω–≥–∞, —Å—Ç—Ä–∞—Ç–µ–≥–∏–π, –ø–ª–∞–≥–∏–Ω–æ–≤. –≠—Ç–æ –º–æ—â–Ω–æ, –Ω–æ:
    - —á—Ç–æ–±—ã —É–≤–µ—Ä–µ–Ω–Ω–æ –≤ –Ω—ë–º –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è, –Ω—É–∂–Ω–æ –≤ –≥–æ–ª–æ–≤–µ –¥–µ—Ä–∂–∞—Ç—å –¥–æ–≤–æ–ª—å–Ω–æ –±–æ–ª—å—à–æ–π ¬´—Å–ª–æ–≤–∞—Ä—å¬ª –ø–æ–Ω—è—Ç–∏–π;
    - —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è, –∫–∞–∫ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ –≤—Å–µ –ø—Ä–æ—Å–ª–æ–π–∫–∏, ‚Äî –Ω–µ –≤—Å–µ–≥–¥–∞ –ø—Ä–æ—Å—Ç–æ.
    - —Å–ª–æ–∂–Ω–æ —á—Ç–æ-—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å: –º–æ—ë issue —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤–∏—Å–∏—Ç —É–∂–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª–µ—Ç, —Ö–æ—Ç—è –ø–æ–¥ –Ω–∏–º –ø–æ–¥–ø–∏—Å–∞–ª–æ—Å—å –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

- **–í—ã—Å–æ–∫–∞—è –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏**
  –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –Ω–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è, –∞ ¬´—á—É—Ç—å‚Äë—á—É—Ç—å –Ω–µ —Ç–∞–∫¬ª, –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã:
    - –ª–∏–±–æ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—Ç—å—Å—è –ø–æ–¥ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏;
    - –ª–∏–±–æ —É—Ö–æ–¥–∏—Ç—å –≤ —Å–≤–æ–∏ –æ–±—ë—Ä—Ç–∫–∏ –≤–æ–∫—Ä—É–≥ Workbox –∏ –Ω–∞—á–∏–Ω–∞—Ç—å –ø–æ–º–Ω–∏—Ç—å —É–∂–µ –¥–≤–∞ —É—Ä–æ–≤–Ω—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏.

- **–°–ª–æ–∂–Ω–æ—Å—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤**
  –°—Ç—Ä–æ–≥–æ –≥–æ–≤–æ—Ä—è, —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ, –Ω–æ –¥–ª—è –º–Ω–æ–≥–∏—Ö –∫–æ–º–∞–Ω–¥ ¬´–Ω–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ–π –ø–ª–∞–≥–∏–Ω –ø–æ–¥ Workbox¬ª ‚Äî —ç—Ç–æ —É–∂–µ —á—Ç–æ‚Äë—Ç–æ –∏–∑ —Ä–∞–∑—Ä—è–¥–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞: –Ω–µ –∫–∞–∂–¥—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –≥–æ—Ç–æ–≤ –≤ —ç—Ç–æ –ø–æ–≥—Ä—É–∂–∞—Ç—å—Å—è.

–ú–Ω–µ –∑–∞—Ö–æ—Ç–µ–ª–æ—Å—å **–º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞**:

- –æ–¥–∏–Ω —Ç–∏–ø `ServiceWorkerPlugin` —Å –ø—Ä–∏–≤—ã—á–Ω—ã–º–∏ —Ö—É–∫–∞–º–∏ (`install`, `activate`, `fetch`, `message`, `sync`, `push`, `periodicsync`, –∞ —Ç–∞–∫–∂–µ `backgroundfetchsuccess` / `backgroundfetchfail` / `backgroundfetchabort` / `backgroundfetchclick` –¥–ª—è [Background Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Background_Fetch_API));
- –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è;
- –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –µ–¥–∏–Ω—ã–π `onError`;
- –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–±—Ä–∞—Ç—å —Å–≤–æ–π SW –∏–∑ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç—ã—Ö –∫–∏—Ä–ø–∏—á–∏–∫–æ–≤ (–ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤ –∏ –ø—Ä–µ—Å–µ—Ç–æ–≤), –∏–ª–∏ –≤–æ–æ–±—â–µ –Ω–∞–ø–∏—Å–∞—Ç—å –ø–ª–∞–≥–∏–Ω ¬´–≤ –ª–æ–±¬ª –∑–∞ –ø–∞—Ä—É –¥–µ—Å—è—Ç–∫–æ–≤ —Å—Ç—Ä–æ–∫.

Workbox –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –≤—ã –æ–∫–µ–π —Å –µ–≥–æ –º–æ–¥–µ–ª—å—é –∏ –æ–±—ä—ë–º–æ–º –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π.
`@budarin/pluggable-serviceworker` ‚Äî —ç—Ç–æ –≤–∞—Ä–∏–∞–Ω—Ç, –∫–æ–≥–¥–∞ —Ö–æ—á–µ—Ç—Å—è:

- –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–≥–æ **–º–æ–¥—É–ª—å–Ω–æ–≥–æ** SW,
- –º–∞–ª–µ–Ω—å–∫–æ–≥–æ —Ä–∞–Ω—Ç–∞–π–º–∞ –±–µ–∑ —Ç—è–∂—ë–ª—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π,
- –∏ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –ª–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å –ª—é–±–æ–º—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ—Ä—É, –¥–∞–∂–µ –Ω–µ ¬´SW‚Äë–≥—É—Ä—É¬ª.

–î–∞–ª—å—à–µ –ø–æ–∫–∞–∂—É, –∫–∞–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –≤—ã–≥–ª—è–¥–∏—Ç –≤–∂–∏–≤—É—é ‚Äî –Ω–∞ –¥–≤—É—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö: —Å –Ω—É–ª—è –∏ –∏–∑ –≥–æ—Ç–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤.

### –ü—Ä–∏–º–µ—Ä 1. –°–≤–æ–π —Å–µ—Ä–≤–∏—Å‚Äë–≤–æ—Ä–∫–µ—Ä —Å –Ω—É–ª—è: –æ–¥–∏–Ω –ø–ª–∞–≥–∏–Ω –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫—É –∏ fetch

–ù–∞–ø–∏—à–µ–º –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π, –Ω–æ –ø–æ–ª–µ–∑–Ω—ã–π SW:

- —Å–µ—Ä–≤–∏—Å-–≤–æ—Ä–∫–µ—Ä —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ—Å–µ—â–µ–Ω–∏–∏ –∏ –≤—Å—Ç—É–ø–∞–µ—Ç –≤ —Å–∏–ª—É —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ/–ø–æ–≤—Ç–æ—Ä–Ω–æ–º –ø–æ—Å–µ—â–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ ‚Äî –∫–ª–∞–¥—ë–º —Å—Ç–∞—Ç–∏–∫—É –≤ –∫–µ—à;
- –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Ä–µ—Å—É—Ä—Å–∞ ‚Äî –æ—Ç–¥–∞—ë–º –∏–∑ –∫–µ—à–∞; –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç ‚Äî –¥–∞—ë–º –∑–∞–ø—Ä–æ—Å—É –ø–æ–π—Ç–∏ –≤ —Å–µ—Ç—å –∫–∞–∫ –æ–±—ã—á–Ω–æ.

```typescript
// precacheAndServePlugin.ts
import type { Plugin } from '@budarin/pluggable-serviceworker';

export function precacheAndServePlugin(config: {
    cacheName: string;
    assets: string[];
}): Plugin {
    const { cacheName, assets } = config;

    return {
        name: 'precache-and-serve',

        install: async () => {
            const cache = await caches.open(cacheName);
            await cache.addAll(assets);
        },

        fetch: async (event, logger) => {
            const cache = await caches.open(cacheName);
            const asset = await cache.match(event.request);

            if (!asset) {
                logger.debug(
                    '[SW] cache miss',
                    new URL(event.request.url).pathname
                );
            }

            // –µ—Å–ª–∏ —Ä–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∫—ç—à–µ - –æ—Ç–¥–∞–µ–º undefined - —ç—Ç–æ —Å–∏–≥–Ω–∞–ª –±–∏–±–ª–∏–æ—Ç–µ–∫–µ —á—Ç–æ–±—ã –≤—ã–∑–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –ø–ª–∞–≥–∏–Ω
            // –µ—Å–ª–∏ –≤—Å–µ –ø–ª–∞–≥–∏–Ω—ã –≤–µ—Ä–Ω—É–ª–∏ undefined - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å–∞–º–∞ –∑–∞–ø—Ä–æ—Å–∏—Ç —Ä–µ—Å—É—Ä—Å —Å —Å–µ—Ä–≤–µ—Ä–∞
            return asset ?? undefined;
        },
    };
}
```

–ö–æ–¥ —Å–µ—Ä–≤–∏—Å‚Äë–≤–æ—Ä–∫–µ—Ä–∞:

```typescript
// sw.ts
import { initServiceWorker } from '@budarin/pluggable-serviceworker';
import { precacheAndServePlugin } from './precacheAndServePlugin';

const options = {
    version: '1.0.0',
    onError: (error, event, type) => {
        console.error('[SW error]', type, error, event);
    },
};

initServiceWorker(
    [
        precacheAndServePlugin({
            cacheName: 'my-app-v1',
            assets: ['/', '/styles.css', '/main.js'],
        }),
    ],
    options
);
```

–ù–∏–∫–∞–∫–∏—Ö —è–≤–Ω—ã—Ö `self.addEventListener('install' | 'fetch')` ‚Äî —Ç–æ–ª—å–∫–æ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≥–æ, **—á—Ç–æ** –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å –ø–ª–∞–≥–∏–Ω. –í—Ö–æ–¥ –≤ –∫–æ–¥ –¥–ª—è –Ω–æ–≤–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–π.

### –ü—Ä–∏–º–µ—Ä 2. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∏–∑ –≥–æ—Ç–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤: offline‚Äëfirst + stale‚Äëwhile‚Äërevalidate(SWR) –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ `'/api/posts'`

–¢–µ–ø–µ—Ä—å —Å–æ–±–µ—Ä—ë–º —á—Ç–æ‚Äë—Ç–æ –ø–æ—Å–µ—Ä—å—ë–∑–Ω–µ–µ, –Ω–æ –≤—Å—ë —Ç–∞–∫ –∂–µ —á–∏—Ç–∞–µ–º–æ–µ: —Å—Ç—Ä–∞–Ω–∏—Ü—ã, —Å–∫—Ä–∏–ø—Ç—ã –∏ —Å—Ç–∏–ª–∏ –æ—Ç–¥–∞—ë–º –∏–∑ –∫–µ—à–∞ (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥—Ä—É–∑–∏—Ç—Å—è –±—ã—Å—Ç—Ä–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ–ª–∞–π–Ω), –ª–µ–Ω—Ç—É –ø–æ—Å—Ç–æ–≤ ‚Äî —Ç–æ–∂–µ –∏–∑ –∫–µ—à–∞, –Ω–æ –≤ —Ñ–æ–Ω–µ –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ–º —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ. –°–µ—Ä–≤–∏—Å‚Äë–≤–æ—Ä–∫–µ—Ä –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —Å—Ä–∞–∑—É, –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –≤–∫–ª–∞–¥–∫–∏.

```typescript
// sw.ts
import { initServiceWorker, Plugin } from '@budarin/pluggable-serviceworker';
import {
    precache,
    serveFromCache,
    skipWaiting(),
    claim(),
    pruneStaleCache,
    staleWhileRevalidate,
} from '@budarin/pluggable-serviceworker/plugins';

const staticCache = 'static-v1';
const postsCache = 'posts-v1';
const assets = ['/', '/main.js', '/styles.css'];

const options = {
    version: '1.0.0',
    onError: (error, event, type) => {
        console.error('[SW error]', type, error, event);
    },
};

// –∫–æ–¥ –Ω–∞—à–µ–≥–æ –ø–ª–∞–≥–∏–Ω–∞
function postsSwrPlugin(config: {
    cacheName: string;
    pathPattern?: RegExp;
}): Plugin {
    const { cacheName, pathPattern = /\/api\/posts(\/|$)/ } = config;
    const swr = staleWhileRevalidate({ cacheName });

    return {
        name: 'posts-swr',

        async fetch(event, logger) {
            const url = new URL(event.request.url);

            if (!pathPattern.test(url.pathname)) {
                return undefined;
            }

            logger.info('[SW] posts SWR for', url.pathname);

            // –≤—ã–∑—ã–≤–∞–µ–º –∫–æ–¥ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–ª–∞–≥–∏–Ω–∞ SWR
            return swr.fetch!(event, logger);
        },
    };
}

initServiceWorker(
    [
        // install: –±—É–¥—É—Ç –≤—ã–∑—ã–≤–∞–Ω—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
        precache({ assets, cacheName: staticCache }),
        skipWaiting(),

        // activate
        claim(),

        // fetch: —Ü–µ–ø–æ—á–∫–∞ –≤—ã–∑–æ–≤–æ–≤ –ø–æ–∫–∞ –∫—Ç–æ-–Ω–∏–±—É–¥—å –Ω–µ –≤–µ—Ä–Ω–µ—Ç —Ä–µ—Å—É—Ä—Å
        serveFromCache({ cacheName: staticCache }),
        postsSwrPlugin({ cacheName: postsCache }),
        // –∏–Ω–∞—á–µ –∑–∞–ø—Ä–æ—Å —É–π–¥–µ—Ç –≤ —Å–µ—Ç—å
    ],
    options
);
```

–°–º–æ—Ç—Ä–∏–º –Ω–∞ –º–∞—Å—Å–∏–≤ –ø–ª–∞–≥–∏–Ω–æ–≤ ‚Äî –∏ –≤–∏–¥–∏–º –≤–µ—Å—å —Å—Ü–µ–Ω–∞—Ä–∏–π:

- –∫–∞–∫–∏–µ –∫–µ—à–∏ –µ—Å—Ç—å;
- –∫–∞–∫ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è SW;
- –∫–∞–∫–∏–µ URL‚Äë—ã –ø–æ–ø–∞–¥–∞—é—Ç –ø–æ–¥ SWR‚Äë–ª–æ–≥–∏–∫—É;
- —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ –Ω–∏ –æ–¥–∏–Ω `fetch`‚Äë–ø–ª–∞–≥–∏–Ω –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª - –ø–∞–∫–µ—Ç —Å–∞–º —Å—Ö–æ–¥–∏—Ç –∑–∞ —Ä–µ—Å—É—Ä—Å–æ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ: –æ–±—Ö–æ–¥ –±–∞–≥–∞ —Å `claim()` –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–° –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã:

```typescript
// main.ts
import {
    isServiceWorkerSupported,
    registerServiceWorkerWithClaimWorkaround,
    onNewServiceWorkerVersion,
    onServiceWorkerMessage,
    pingServiceWorker,
} from '@budarin/pluggable-serviceworker/client';

if (isServiceWorkerSupported()) {
    (async () => {
        // –æ–±—Ö–æ–¥–∏–º –±–∞–≥ Chrome
        const reg = await registerServiceWorkerWithClaimWorkaround('/sw.js');

        const unsubscribeUpdate = onNewServiceWorkerVersion(reg, () => {
            // –∑–¥–µ—Å—å –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –±–∞–Ω–Ω–µ—Ä "–î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
            console.log('New Service Worker version is ready!');
        });

        const unsubscribeMsg = onServiceWorkerMessage(
            'SW_MSG_NEW_VERSION_READY',
            () => {
                // –∑–¥–µ—Å—å ‚Äì –±–∞–Ω–Ω–µ—Ä "–ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É"
                console.log('New assets cached, you can reload the page.');
            }
        );

        window.addEventListener('focus', async () => {
            await pingServiceWorker();
        });

        // –ø–æ–∑–∂–µ, –∫–æ–≥–¥–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω—ã:
        unsubscribeUpdate();
        unsubscribeMsg();
    })();
}
```

–í–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±—ã–ª –æ–±–Ω–∞—Ä—É–∂–µ–Ω –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –±–∞–≥ –≤ Google Chrome - –≤–æ –≤—Ä–µ–º—è 1-–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–∏—Å-–≤–æ—Ä–∫–µ—Ä–∞ —Å –≤—ã–∑–æ–≤–æ–º `claim()` —Å–µ—Ä–≤–∏—Å-–≤–æ—Ä–∫–µ—Ä –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è, –Ω–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –¥–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏. [issue-482903583](https://issues.chromium.org/issues/482903583#comment1)

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –¥–∞–Ω–Ω—ã–π –ø–∞–∫–µ—Ç –æ—Å–æ–±–µ–Ω–Ω—ã–º

**–ö–æ—Ä–æ—Ç–∫–æ:**

- **–ü–ª–∞–≥–∏–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
    - –û–±—ã—á–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã —Å —Ö—É–∫–∞–º–∏ `install` / `activate` / `fetch` / ‚Ä¶
    - –ö–∞–∂–¥—ã–π –ø–ª–∞–≥–∏–Ω –¥–µ–ª–∞–µ—Ç —Å–≤–æ—é –∑–∞–¥–∞—á—É (–∫–µ—à, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, SWR –¥–ª—è API –∏ —Ç.–¥.).

- **–ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**
    - –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º: –ø–æ–¥ –∫–∞–∂–¥—ã–π —Ç–∏–ø —Å–æ–±—ã—Ç–∏–π (`install`, `activate`, `fetch`, `message`, `sync`, `periodicsync`, `push`, —Å–æ–±—ã—Ç–∏—è Background Fetch) —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–≤–æ–π –º–∞—Å—Å–∏–≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤. –ü–ª–∞–≥–∏–Ω—ã —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ `order` (–ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0); –≤ —ç—Ç–æ–º –ø–æ—Ä—è–¥–∫–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –º–∞—Å—Å–∏–≤—ã. –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –ø–ª–∞–≥–∏–Ω** –¥–ª—è —ç—Ç–æ–≥–æ —Å–æ–±—ã—Ç–∏—è. –ü—Ä–∏ –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è –≤ —Å–µ—Ä–≤–∏—Å‚Äë–≤–æ—Ä–∫–µ—Ä–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–∑ –Ω—É–∂–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞.
    - –ü–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω –¥–ª—è `fetch` –∏ `push` (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ). –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π (`install`, `activate`, `message`, `sync`, `periodicsync`, —Å–æ–±—ã—Ç–∏—è Background Fetch) –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `order` –≤ –∫–æ–Ω—Ñ–∏–≥–µ –ø–ª–∞–≥–∏–Ω–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.
    - `install` / `activate` / `message` / `sync` / `periodicsync` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ;
    - `fetch` ‚Äî –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, —Å –ø–æ–Ω—è—Ç–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è;
    - `push` ‚Äî –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ.

- **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π `onError` –∏ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –ª–æ–≥–≥–µ—Ä**
  –û–¥–∏–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ –¥–ª—è –≤—Å–µ–≥–æ SW –∏ –µ–¥–∏–Ω—ã–π `logger` c `trace/debug/info/warn/error` –≤–æ –≤—Å–µ—Ö –ø–ª–∞–≥–∏–Ω–∞—Ö.

- **–ì–æ—Ç–æ–≤—ã–µ –ø—Ä–∏–º–∏—Ç–∏–≤—ã, –ø—Ä–µ—Å–µ—Ç—ã –∏ —Ç–∏–ø–æ–≤—ã–µ SW**
  –ú–æ–∂–Ω–æ:
    - –ø–∏—Å–∞—Ç—å —Å–≤–æ–∏ –ø–ª–∞–≥–∏–Ω—ã —Å –Ω—É–ª—è;
    - –∏–ª–∏ —Å–æ–±–∏—Ä–∞—Ç—å SW –∏–∑ –≥–æ—Ç–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤:
        - –ø–ª–∞–≥–∏–Ω—ã: `precache`, `cacheFirst`, `networkFirst`, `staleWhileRevalidate`, `serveFromCache`, `restoreAssetToCache`, `skipWaiting`, `claim`, `reloadClients`, `claimAndReloadClients`, `precacheMissing`, `precacheWithNotification`
        - –ø—Ä–µ—Å–µ—Ç: `offlineFirst`
        - –≥–æ—Ç–æ–≤—ã–µ SW: `activateAndUpdateOnNextVisitSW`, `immediatelyActivateAndUpdateSW`, `immediatelyActivateUpdateOnSignalSW`

- **–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —É—Ç–∏–ª–∏—Ç—ã**
  –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è SW —Å –æ–±—Ö–æ–¥–æ–º –±–∞–≥–∞ `claim()`, –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é, —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç SW, `ping` –¥–ª—è ¬´–ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è¬ª –∏ –ø—Ä–æ—á–µ–µ.

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install @budarin/pluggable-serviceworker
# –∏–ª–∏
pnpm add @budarin/pluggable-serviceworker
```

### –ì–¥–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∂–∏–≤—å—ë–º

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: [`github.com/budarin/pluggable-serviceworker`](https://github.com/budarin/pluggable-serviceworker)
–ü–∞–∫–µ—Ç –≤ npm: [`@budarin/pluggable-serviceworker`](https://www.npmjs.com/package/@budarin/pluggable-serviceworker)

–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –µ—Å—Ç—å –¥–µ–º–æ‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ React + Vite –≤ –ø–∞–ø–∫–µ `demo/`:

- –ø—Ä–µ—Å–µ—Ç `offlineFirst`;
- —Ç–∏–ø–æ–≤–æ–π —Å–µ—Ä–≤–∏—Å‚Äë–≤–æ—Ä–∫–µ—Ä `activateOnSignal`;
- –ø—Ä–∏–º–µ—Ä –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –∫–æ–¥–∞ —Å `registerServiceWorkerWithClaimWorkaround`, `onNewServiceWorkerVersion`, `onServiceWorkerMessage`, `pingServiceWorker` –∏ —Ç.–¥.

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –∂–∏–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∞ –Ω–µ ¬´—Å—Ñ–µ—Ä–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä –≤ –≤–∞–∫—É—É–º–µ¬ª ‚Äî –º–æ–∂–Ω–æ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å, –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫ –æ–Ω–æ –≤–µ–¥—ë—Ç —Å–µ–±—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

### –ö–æ–≥–¥–∞ `@budarin/pluggable-serviceworker` –∑–∞—Ö–æ–¥–∏—Ç –ª—É—á—à–µ –≤—Å–µ–≥–æ

–Ø –Ω–µ –ø—ã—Ç–∞—é—Å—å —Å–∫–∞–∑–∞—Ç—å ¬´–∑–∞–±—É–¥—å—Ç–µ –ø—Ä–æ Workbox¬ª. –£ –Ω–µ–≥–æ –æ–≥—Ä–æ–º–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∏ —Å–≤–æ—è –Ω–∏—à–∞. –ù–æ –µ—Å—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–∏, –≥–¥–µ —Ö–æ—á–µ—Ç—Å—è –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞, –∫–∞–∫ –≤ —ç—Ç–æ–º –ø–∞–∫–µ—Ç–µ:

- **–ù—É–∂–µ–Ω –ø—Ä–æ—Å—Ç–æ–π —Å—Ç–∞—Ä—Ç**
  –•–æ—á–µ—Ç—Å—è, —á—Ç–æ–±—ã –¥–∂—É–Ω/–º–∏–¥–ª –∑–∞ –≤–µ—á–µ—Ä —Å–æ–±—Ä–∞–ª —Ä–∞–±–æ—á–∏–π SW –∏ –ø–æ–Ω–∏–º–∞–ª, —á—Ç–æ —Ç–∞–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∞ –Ω–µ —Ç–æ–Ω—É–ª –≤ —Å–ª–æ—è—Ö –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π.

- **–ü—Ä–æ–µ–∫—Ç–æ–≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ, –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–¥–Ω–∞**
  –í—ã —Ö–æ—Ç–∏—Ç–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –ø–ª–∞–≥–∏–Ω—ã (`precache`, `auth`, SWR‚Äë–∫–µ—à –¥–ª—è API, –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏) –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞–º–∏ –±–µ–∑ –∫–æ–ø–∏–ø–∞—Å—Ç—ã –∏ –±–µ–∑ –≤—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –≤—Å–µ–≥–æ Workbox.

- **–ù—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å**
  –í–∞–∂–Ω–æ —Ç–æ—á–Ω–æ –∑–Ω–∞—Ç—å, –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –∏ —á—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ `install/activate/fetch/push`, –∏ –∏–º–µ—Ç—å –æ–¥–∏–Ω `onError`, –∫–æ—Ç–æ—Ä—ã–π –≤–∏–¥–∏—Ç –≤—Å–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫ ‚Äî –æ—Ç –ø–∞–¥–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –ø–ª–∞–≥–∏–Ω–∞ –¥–æ `unhandledrejection` –≤ SW.

- **–ù–µ —Ö–æ—á–µ—Ç—Å—è —Ç—è–Ω—É—Ç—å —Ç—è–∂—ë–ª—ã–π —Ä–∞–Ω—Ç–∞–π–º**
  –ü—Ä–æ–µ–∫—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∫ —Ä–∞–∑–º–µ—Ä—É –±–∞–Ω–¥–ª–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –∞ –∑–∞–¥–∞—á–∞ ‚Äî ¬´–ø—Ä–æ—Å—Ç–æ —Å–æ–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–ª–∞–≥–∏–Ω–æ–≤ –∏ –∂–∏—Ç—å —Å–ø–æ–∫–æ–π–Ω–æ¬ª.

–ï—Å–ª–∏ –≤—ã —É–∂–µ –∂–∏–≤—ë—Ç–µ —Å Workbox –∏ –æ–Ω –≤–∞—Å –≤—Å–µ–º —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç ‚Äî –æ—Ç–ª–∏—á–Ω–æ, –ø—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ. –ï—Å–ª–∏ –∂–µ –≤—ã —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ª–æ–≤–∏—Ç–µ —Å–µ–±—è –Ω–∞ –º—ã—Å–ª–∏ ¬´—Ö–æ—á—É —Å–¥–µ–ª–∞—Ç—å —á—É—Ç—å‚Äë—á—É—Ç—å –ø–æ‚Äë—Å–≤–æ–µ–º—É, –Ω–æ –ª–µ–∑—Ç—å –≤ –∫–∏—à–∫–∏ Workbox –Ω–µ —Ö–æ—á–µ—Ç—Å—è¬ª ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ, –º–æ–π –ø–∞–∫–µ—Ç –∫–∞–∫ —Ä–∞–∑ —Ç–æ—Ç –±–æ–ª–µ–µ –ª—ë–≥–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ —Ö–≤–∞—Ç–∞–ª–æ –º–µ–∂–¥—É ¬´–ø–∏—Å–∞—Ç—å –≤—Å—ë —Ä—É–∫–∞–º–∏¬ª –∏ ¬´—Ç—è–Ω—É—Ç—å –æ–≥—Ä–æ–º–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫¬ª.

### –ò—Ç–æ–≥–∏ –∏ —á—Ç–æ –¥–∞–ª—å—à–µ

–ú–Ω–µ —Ö–æ—Ç–µ–ª–æ—Å—å, —á—Ç–æ–±—ã —Å–µ—Ä–≤–∏—Å‚Äë–≤–æ—Ä–∫–µ—Ä –≤ –ø—Ä–æ–µ–∫—Ç–µ –≤—ã–≥–ª—è–¥–µ–ª –∫–∞–∫ **–Ω–∞–±–æ—Ä —è–≤–Ω—ã—Ö, –º–∞–ª–µ–Ω—å–∫–∏—Ö –º–æ–¥—É–ª–µ–π**, –∞ –Ω–µ –∫–∞–∫ –æ–¥–∏–Ω –±–æ–ª—å—à–æ–π —Ñ–∞–π–ª —Å –¥–µ—Å—è—Ç–∫–æ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π –∏ —Ä–∞–∑–º—ã—Ç—ã–º–∏ –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏. –ò–∑ —ç—Ç–æ–≥–æ –∂–µ–ª–∞–Ω–∏—è –∏ –≤—ã—Ä–æ—Å `@budarin/pluggable-serviceworker`:

- –ø–ª–∞–≥–∏–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –æ–±—ä—è—Å–Ω–∏—Ç—å –∑–∞ 5 –º–∏–Ω—É—Ç;
- –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ö—É–∫–æ–≤;
- —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π `onError` –∏ –µ–¥–∏–Ω—ã–π –ª–æ–≥–≥–µ—Ä;
- –∫—É—á–∞ –≥–æ—Ç–æ–≤—ã—Ö –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤ –∏ –ø—Ä–µ—Å–µ—Ç–æ–≤, –Ω–æ –±–µ–∑ –Ω–∞–≤—è–∑–∞–Ω–Ω–æ–π ¬´–º–µ–≥–∞—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏¬ª.

–ï—Å–ª–∏ –≤–∞–º –±–ª–∏–∑–æ–∫ —Ç–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ ‚Äî –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–±—Ä–∞—Ç—å —Å–≤–æ–π –ø–µ—Ä–≤—ã–π SW –∏–∑ –æ–¥–Ω–æ–≥–æ‚Äë–¥–≤—É—Ö –ø–ª–∞–≥–∏–Ω–æ–≤, –∞ –ø–æ—Ç–æ–º –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –¥–æ—Å—Ç—Ä–æ–∏—Ç—å –¥–æ –Ω—É–∂–Ω–æ–≥–æ –≤–∞–º –º–æ–Ω—Å—Ç—Ä–∞.

–ë—É–¥—É —Ä–∞–¥ –ª—é–±–æ–º—É —Ñ–∏–¥–±–µ–∫—É: –∏—à—å—é –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, –∏–¥–µ—è–º –Ω–æ–≤—ã—Ö –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤/–ø—Ä–µ—Å–µ—Ç–æ–≤, –∏—Å—Ç–æ—Ä–∏—è–º. –¢–æ–∫—Å–∏—á–Ω–æ–º—É —Ñ–∏–¥–±—ç–∫—É —Ä–∞–¥ –Ω–µ –±—É–¥—É - –Ω–µ –ø–∏—à–∏—Ç–µ ! üòä
